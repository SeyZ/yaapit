/*
 * $Id: base64.js,v 1.7 2012/08/23 10:30:18 dankogai Exp dankogai $
 *
 *  Licensed under the MIT license.
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  References:
 *    http://en.wikipedia.org/wiki/Base64
 */(function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(){var e=[],t="A".charCodeAt(0),n="a".charCodeAt(0),r="0".charCodeAt(0);for(var i=0;i<26;i++)e.push(t+i);for(var i=0;i<26;i++)e.push(n+i);for(var i=0;i<10;i++)e.push(r+i);return e.push("+".charCodeAt(0)),e.push("/".charCodeAt(0)),e}(),r=function(e){var t={};for(var n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(t),i=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t},s=function(e){var t=0;while(e.length%3)e.push(0),t++;var r=[];for(var i=0,s=e.length;i<s;i+=3){var o=e[i],u=e[i+1],a=e[i+2];if(o>=256||u>=256||a>=256)throw"unsupported character found";var f=o<<16|u<<8|a;r.push(n[f>>>18],n[f>>>12&63],n[f>>>6&63],n[f&63])}while(t--)r[r.length-t-1]="=".charCodeAt(0);return g(r)},o=function(e){e=e.replace(/[^A-Za-z0-9+\/]+/g,"");var t=[],n=e.length%4;for(var i=0,s=e.length;i<s;i+=4){var o=(r[e.charAt(i)]||0)<<18|(r[e.charAt(i+1)]||0)<<12|(r[e.charAt(i+2)]||0)<<6|(r[e.charAt(i+3)]||0);t.push(o>>16,o>>8&255,o&255)}return t.length-=[0,0,2,1][n],t},u=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i<128?t.push(i):i<2048?t.push(192|i>>>6,128|i&63):t.push(224|i>>>12&15,128|i>>>6&63,128|i&63)}return t},a=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t.push(i);else{var s=e[++n];if(i<224)t.push((i&31)<<6|s&63);else{var o=e[++n];t.push((i&15)<<12|(s&63)<<6|o&63)}}}return t},f=function(e){return s(i(e))},l=function(e){return g(o(e))},c=function(e){return a(i(e))},h=function(e){return g(a(e))},p=function(e){return g(a(i(e)))},d=function(e){return u(i(e))},v=function(e){return g(u(e))},m=function(e){return g(u(i(e)))},g=function(e){var t=[],n;for(n=0;n<e.length;n+=65536)t.push(String.fromCharCode.apply(String,e.slice(n,n+65536)));return t.join("")};if(e.btoa)var y=e.btoa,b=function(e){return y(m(e))};else var y=f,b=function(e){return s(d(e))};if(e.atob)var w=e.atob,E=function(e){return p(w(e))};else var w=l,E=function(e){return h(o(e))};e.Base64={convertUTF8ArrayToBase64:s,convertByteArrayToBase64:s,convertBase64ToUTF8Array:o,convertBase64ToByteArray:o,convertUTF16ArrayToUTF8Array:u,convertUTF16ArrayToByteArray:u,convertUTF8ArrayToUTF16Array:a,convertByteArrayToUTF16Array:a,convertUTF8StringToBase64:f,convertBase64ToUTF8String:l,convertUTF8StringToUTF16Array:c,convertUTF8ArrayToUTF16String:h,convertByteArrayToUTF16String:h,convertUTF8StringToUTF16String:p,convertUTF16StringToUTF8Array:d,convertUTF16StringToByteArray:d,convertUTF16ArrayToUTF8String:v,convertUTF16StringToUTF8String:m,convertUTF16StringToBase64:b,convertBase64ToUTF16String:E,fromBase64:l,toBase64:f,atob:w,btoa:y,utob:m,btou:p,encode:b,encodeURI:function(e){return b(e).replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=+$/,"")},decode:function(e){return E(e.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}))}}})(this);